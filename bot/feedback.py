from config.config import Config
import openai

config = Config()

openai.api_key = config.OPENAI_APIKEY

# Load the system prompt from a text file (system-prompt.txt)
with open("bot/data/system-prompt.txt", "r") as f:
    system_prompt = f.read()
    print(system_prompt)

def critic_speech(transcript, system_prompt=system_prompt):
    # Add the system prompt to the beginning of the user's input
    system_prompt = f"{system_prompt}"

    # Create a chat conversation with system and user messages
    response = openai.ChatCompletion.create(
        model="gpt-3.5-turbo",
        messages=[
            {"role": "system", "content": system_prompt},
            {"role": "user", "content": transcript},
        ],
    )

    # Get the response generated by the model
    generated_response = response["choices"][0]["message"]["content"]

    return generated_response